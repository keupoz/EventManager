!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.EventManager=t()}(this,function(){"use strict";var r=function(e,t){this.type=e,this.data=t,this.prevented=!1};r.prototype.preventDefault=function(e){void 0===e&&(e=!0),this.prevented=!!e};var e=function(){this.dispose()};e.prototype._findEventListener=function(e,t){return this._listeners[e]?this._listeners[e].find(function(e){return e.handler===t}):null},e.prototype.dispatchEvent=function(t,e){var n=this;void 0===e&&(e={});var i=new r(t,e);return("__dispatchEvent__"===t||this.dispatchEvent("__dispatchEvent__",{event:i}))&&this._listeners[t]&&this._listeners[t].forEach(function(e){e.options.prevent&&i.preventDefault(),e.options.once&&n.removeEventListener(t,e.handler),e.handler.call(e.options.scope||n,i,n.removeEventListener.bind(n,t,e.handler))}),i},e.prototype.hasEventListener=function(e,t){return!!this._findEventListener(e,t)},e.prototype.addEventListener=function(e,t,n){if(void 0===n&&(n={}),!this.dispatchEvent("__addListener__",{type:e,handler:t,options:n}))return!1;this._listeners[e]||(this._listeners[e]=new Array);var i=this._findEventListener(e,t);return i?i.options=n:this._listeners[e].push({handler:t,options:n}),!0},e.prototype.removeEventListener=function(e,t){if(!this.dispatchEvent("__removeListener__",{type:e,handler:t}))return!1;if(!this._listeners[e])return!0;if(t)this._listeners[e]=this._listeners[e].filter(function(e){return e.handler!==t});else if("function"==typeof(t=e))for(var n in this._listeners)this.removeEventListener(n,t);else"string"==typeof e&&delete this._listeners[e];return!0},e.prototype.on=function(e,t,n){var i,r,s=this;if((e=e.trim().replace(/\s+/g," ")).includes(" ")){var o=new Object;return e.split(" ").forEach(function(e){return o[e.split(".")[0]]=s.on(e,t,n)}),o}if(e=(i=e.split("."))[0],r=i.slice(1),"function"==typeof t){var p=!1,f=!1;return r.forEach(function(e){switch(e){case"once":p=!0;break;case"prevent":f=!0;break;default:console.warn("EventManager: Unknown option: "+e)}}),this.addEventListener(e,t,{once:p,prevent:f,scope:n})}var a=t;return this.dispatchEvent(e,a)},e.prototype.off=function(e,t){var n=this;if((e=e.trim().replace(/\s+/g," ")).includes(" ")){var i=new Object;return e.split(" ").forEach(function(e){return i[e.split(".")[0]]=n.off(e,t)}),i}return e=e.split(".")[0],this.removeEventListener(e,t)},e.prototype.dispose=function(){this._listeners=new Object};return e.version="1.0.1",e});