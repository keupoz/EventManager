!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.EventManager=t()}(this,function(){"use strict";var i=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},t=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),r=function(){function n(e,t){i(this,n),this.type=e,this.data=t,this.prevented=!1}return t(n,[{key:"preventDefault",value:function(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];this.prevented=!!e}}]),n}(),e=function(){function e(){i(this,e),this.dispose()}return t(e,[{key:"_findEventListener",value:function(e,t){return this._listeners[e]?this._listeners[e].find(function(e){return e.handler===t}):null}},{key:"dispatchEvent",value:function(t){var n=this,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i=new r(t,e);return("__dispatchEvent__"===t||this.dispatchEvent("__dispatchEvent__",{event:i}))&&this._listeners[t]&&this._listeners[t].forEach(function(e){e.options.prevent&&i.preventDefault(),e.options.once&&n.removeEventListener(t,e.handler),e.handler.call(e.options.scope||n,i,n.removeEventListener.bind(n,t,e.handler))}),i}},{key:"hasEventListener",value:function(e,t){return!!this._findEventListener(e,t)}},{key:"addEventListener",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};if(!this.dispatchEvent("__addListener__",{type:e,handler:t,options:n}))return!1;this._listeners[e]||(this._listeners[e]=new Array);var i=this._findEventListener(e,t);return i?i.options=n:this._listeners[e].push({handler:t,options:n}),!0}},{key:"removeEventListener",value:function(e,t){if(!this.dispatchEvent("__removeListener__",{type:e,handler:t}))return!1;if(!this._listeners[e])return!0;if(t)this._listeners[e]=this._listeners[e].filter(function(e){return e.handler!==t});else if("function"==typeof(t=e))for(var n in this._listeners)this.removeEventListener(n,t);else"string"==typeof e&&delete this._listeners[e];return!0}},{key:"on",value:function(e,t,n){var i=this;if((e=e.trim().replace(/\s+/g," ")).includes(" ")){var r=new Object;return e.split(" ").forEach(function(e){return r[e.split(".")[0]]=i.on(e,t,n)}),r}var s,o=void 0,a=e.split("."),u=(s=a,Array.isArray(s)?s:Array.from(s));if(e=u[0],o=u.slice(1),"function"==typeof t){var f=!1,l=!1;return o.forEach(function(e){switch(e){case"once":f=!0;break;case"prevent":l=!0;break;default:console.warn("EventManager: Unknown option: "+e)}}),this.addEventListener(e,t,{once:f,prevent:l,scope:n})}var c=t;return this.dispatchEvent(e,c)}},{key:"off",value:function(e,t){var n=this;if((e=e.trim().replace(/\s+/g," ")).includes(" ")){var i=new Object;return e.split(" ").forEach(function(e){return i[e.split(".")[0]]=n.off(e,t)}),i}return e=e.split(".")[0],this.removeEventListener(e,t)}},{key:"dispose",value:function(){this._listeners=new Object}}]),e}();return e.version="1.0.0",e});